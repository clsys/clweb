<template>
  <div :class="className" :style="{height:height,width:width}" />
</template>

<script>
import echarts from 'echarts'
require('echarts/theme/macarons') // echarts theme
import resize from './mixins/resize'

const color_green = '#6fffee'
const color_red = '#ff0f0f'

export default {
  name: 'Market',
  // components: { echarts },
  mixins: [resize],
  props: {
    className: {
      type: String,
      default: 'chart'
    },
    width: {
      type: String,
      default: '90%'
    },
    height: {
      type: String,
      default: '800px'
    }
  },
  data() {
    return {
      chart: null
    }
  },
  mounted() {
    this.$nextTick(() => {
      this.initChart()
    })
  },
  beforeDestroy() {
    if (!this.chart) {
      return
    }
    this.chart.dispose()
    this.chart = null
  },
  methods: {
    initChart() {
      this.chart = echarts.init(this.$el, 'macarons')
      var rawData = [
        ['2019-08-06 00:00:00', 6.75, 6.89, 6.62, 7.3, 89925.79],
        ['2019-08-07 00:00:00', 6.83, 7.1, 6.81, 7.15, 52296.0],
        ['2019-08-08 00:00:00', 7.1, 7.1, 6.93, 7.17, 44511.44],
        ['2019-08-09 00:00:00', 7.12, 7.09, 6.99, 7.12, 29808.88],
        ['2019-08-12 00:00:00', 7.03, 7.1, 6.99, 7.13, 41727.29],
        ['2019-08-13 00:00:00', 7.1, 7.19, 6.9, 7.23, 49484.15],
        ['2019-08-14 00:00:00', 7.23, 7.03, 7.01, 7.23, 30901.0],
        ['2019-08-15 00:00:00', 7.0, 7.21, 6.9, 7.21, 45266.08],
        ['2019-08-16 00:00:00', 7.11, 7.36, 7.11, 7.42, 70857.9],
        ['2019-08-19 00:00:00', 7.58, 7.69, 7.46, 7.77, 132921.08],
        ['2019-08-20 00:00:00', 7.6, 7.54, 7.52, 7.76, 92353.17],
        ['2019-08-21 00:00:00', 7.56, 7.67, 7.45, 7.77, 79320.67],
        ['2019-08-22 00:00:00', 7.58, 7.66, 7.51, 7.76, 93404.0],
        ['2019-08-23 00:00:00', 7.68, 8.43, 7.68, 8.43, 75645.21],
        ['2019-08-26 00:00:00', 9.27, 9.27, 9.27, 9.27, 26017.5],
        ['2019-08-27 00:00:00', 10.2, 10.2, 10.2, 10.2, 15078.5],
        ['2019-08-28 00:00:00', 10.4, 9.18, 9.18, 10.4, 441873.58],
        ['2019-08-29 00:00:00', 8.8, 8.6, 8.46, 8.99, 393974.86],
        ['2019-08-30 00:00:00', 8.4, 8.0, 7.86, 8.69, 314112.57],
        ['2019-09-02 00:00:00', 7.82, 7.96, 7.75, 8.06, 183019.5],
        ['2019-09-03 00:00:00', 7.9, 8.13, 7.89, 8.32, 175432.23],
        ['2019-09-04 00:00:00', 8.05, 8.03, 7.9, 8.15, 154965.82],
        ['2019-09-05 00:00:00', 8.03, 8.11, 7.96, 8.28, 165757.93],
        ['2019-09-06 00:00:00', 8.05, 8.08, 8.0, 8.18, 119758.03],
        ['2019-09-09 00:00:00', 8.56, 8.17, 8.08, 8.56, 176229.89],
        ['2019-09-10 00:00:00', 8.1, 8.03, 8.0, 8.17, 124428.03],
        ['2019-09-11 00:00:00', 8.08, 7.95, 7.95, 8.08, 83775.29],
        ['2019-09-12 00:00:00', 8.0, 8.02, 7.91, 8.02, 55451.76],
        ['2019-09-16 00:00:00', 7.99, 8.07, 7.93, 8.14, 78237.48],
        ['2019-09-17 00:00:00', 8.04, 8.0, 7.97, 8.11, 65096.86],
        ['2019-09-18 00:00:00', 8.04, 7.98, 7.98, 8.12, 72499.76],
        ['2019-09-19 00:00:00', 7.91, 8.1, 7.76, 8.11, 109354.58],
        ['2019-09-20 00:00:00', 8.12, 8.07, 8.05, 8.13, 47498.5],
        ['2019-09-23 00:00:00', 8.07, 8.09, 8.06, 8.15, 52722.3],
        ['2019-09-24 00:00:00', 8.15, 8.09, 8.08, 8.15, 44455.0],
        ['2019-09-25 00:00:00', 8.27, 8.59, 8.25, 8.9, 261974.24],
        ['2019-09-26 00:00:00', 8.51, 8.63, 7.73, 8.88, 181767.89],
        ['2019-09-27 00:00:00', 8.3, 8.46, 8.29, 8.7, 86867.45],
        ['2019-09-30 00:00:00', 8.38, 8.38, 8.35, 8.65, 61441.0],
        ['2019-10-08 00:00:00', 8.37, 8.46, 8.15, 8.48, 68113.66],
        ['2019-10-09 00:00:00', 8.45, 8.48, 8.37, 8.65, 69937.49],
        ['2019-10-10 00:00:00', 8.47, 8.91, 8.46, 8.97, 117118.23],
        ['2019-10-11 00:00:00', 9.0, 9.6, 8.86, 9.8, 259400.26],
        ['2019-10-14 00:00:00', 9.68, 9.5, 9.18, 9.72, 183386.0],
        ['2019-10-15 00:00:00', 10.45, 9.64, 9.46, 10.45, 233337.36],
        ['2019-10-16 00:00:00', 9.45, 9.25, 9.17, 9.63, 119098.92],
        ['2019-10-17 00:00:00', 9.09, 9.37, 8.95, 9.45, 83174.6],
        ['2019-10-18 00:00:00', 9.27, 9.29, 9.18, 9.47, 37198.9],
        ['2019-10-21 00:00:00', 9.1, 9.36, 9.02, 9.38, 43135.02],
        ['2019-10-22 00:00:00', 9.23, 9.23, 9.2, 9.39, 31372.0],
        ['2019-10-23 00:00:00', 9.23, 9.18, 9.05, 9.25, 30807.0],
        ['2019-10-24 00:00:00', 9.38, 8.93, 8.91, 9.39, 32671.5],
        ['2019-10-25 00:00:00', 8.9, 9.05, 8.69, 9.14, 41313.0],
        ['2019-10-28 00:00:00', 9.06, 9.08, 8.96, 9.18, 44909.79],
        ['2019-10-29 00:00:00', 9.08, 9.05, 8.86, 9.12, 45282.5],
        ['2019-10-30 00:00:00', 9.01, 8.99, 8.91, 9.09, 29894.0],
        ['2019-10-31 00:00:00', 9.06, 8.95, 8.95, 9.09, 20556.51],
        ['2019-11-01 00:00:00', 9.1, 8.96, 8.72, 9.1, 34220.0],
        ['2019-11-04 00:00:00', 8.96, 8.92, 8.84, 9.04, 23683.0],
        ['2019-11-05 00:00:00', 8.99, 9.01, 8.8, 9.01, 29658.0],
        ['2019-11-06 00:00:00', 8.99, 9.06, 8.95, 9.2, 37467.4],
        ['2019-11-07 00:00:00', 9.06, 9.03, 9.01, 9.15, 12085.98],
        ['2019-11-08 00:00:00', 9.02, 8.95, 8.93, 9.08, 15215.52],
        ['2019-11-11 00:00:00', 8.95, 8.89, 8.8, 9.0, 14483.0],
        ['2019-11-12 00:00:00', 8.89, 9.14, 8.87, 9.16, 25308.98],
        ['2019-11-13 00:00:00', 9.15, 10.05, 9.15, 10.05, 105453.48],
        ['2019-11-14 00:00:00', 11.06, 11.06, 10.3, 11.06, 288912.79],
        ['2019-11-15 00:00:00', 10.5, 10.94, 10.34, 11.3, 167729.96],
        ['2019-11-18 00:00:00', 10.51, 11.18, 10.4, 11.4, 169269.75],
        ['2019-11-19 00:00:00', 10.98, 11.08, 10.92, 11.35, 195582.89],
        ['2019-11-20 00:00:00', 11.0, 10.76, 10.63, 11.69, 291059.2],
        ['2019-11-21 00:00:00', 10.57, 10.38, 10.32, 10.97, 235943.19],
        ['2019-11-22 00:00:00', 10.27, 10.36, 10.16, 10.66, 121794.99],
        ['2019-11-25 00:00:00', 10.5, 9.96, 9.32, 10.51, 188688.47],
        ['2019-11-26 00:00:00', 9.96, 10.23, 9.76, 10.48, 134862.5],
        ['2019-11-27 00:00:00', 10.05, 10.05, 9.96, 10.29, 59744.5],
        ['2019-11-28 00:00:00', 10.24, 10.0, 9.81, 10.24, 54505.99],
        ['2019-11-29 00:00:00', 9.92, 10.01, 9.83, 10.06, 29343.5],
        ['2019-12-02 00:00:00', 9.88, 9.77, 9.64, 10.0, 59545.0],
        ['2019-12-03 00:00:00', 9.69, 9.77, 9.6, 9.8, 26149.0],
        ['2019-12-04 00:00:00', 9.75, 9.73, 9.63, 9.94, 37288.65],
        ['2019-12-05 00:00:00', 9.8, 9.7, 9.6, 9.8, 35858.62],
        ['2019-12-06 00:00:00', 9.7, 9.6, 9.49, 9.73, 34793.17],
        ['2019-12-09 00:00:00', 9.58, 10.56, 9.5, 10.56, 142483.71],
        ['2019-12-10 00:00:00', 10.75, 10.5, 10.02, 10.97, 142580.17],
        ['2019-12-11 00:00:00', 10.43, 10.19, 10.13, 10.45, 72416.28],
        ['2019-12-12 00:00:00', 10.19, 10.06, 10.0, 10.19, 42971.19],
        ['2019-12-13 00:00:00', 10.08, 10.09, 10.02, 10.15, 42647.5],
        ['2019-12-16 00:00:00', 10.07, 10.1, 9.82, 10.11, 44868.5],
        ['2019-12-17 00:00:00', 10.07, 10.01, 9.99, 10.17, 59731.4],
        ['2019-12-18 00:00:00', 9.96, 10.12, 9.7, 10.15, 76338.1],
        ['2019-12-19 00:00:00', 10.12, 9.95, 9.89, 10.12, 62352.73],
        ['2019-12-20 00:00:00', 9.97, 9.8, 9.74, 9.99, 38843.19],
        ['2019-12-23 00:00:00', 9.73, 9.84, 9.6, 10.05, 81020.0],
        ['2019-12-24 00:00:00', 9.8, 9.77, 9.73, 9.94, 46884.1],
        ['2019-12-25 00:00:00', 9.78, 9.56, 9.52, 9.86, 44767.94],
        ['2019-12-26 00:00:00', 9.6, 9.51, 9.14, 9.78, 67854.0],
        ['2019-12-27 00:00:00', 9.5, 9.81, 9.39, 9.96, 106791.5],
        ['2019-12-30 00:00:00', 9.84, 9.72, 9.68, 9.88, 36963.5],
        ['2019-12-31 00:00:00', 9.72, 9.5, 9.5, 9.76, 36165.13],
        ['2020-01-02 00:00:00', 9.56, 9.55, 9.44, 9.58, 37446.97],
        ['2020-01-03 00:00:00', 9.56, 9.51, 9.5, 9.58, 33558.5],
        ['2020-01-06 00:00:00', 9.46, 9.48, 9.38, 9.56, 44604.84],
        ['2020-01-07 00:00:00', 9.43, 9.51, 9.43, 9.6, 38129.0],
        ['2020-01-08 00:00:00', 9.53, 9.4, 9.28, 9.53, 42074.5],
        ['2020-01-09 00:00:00', 9.45, 9.44, 9.33, 9.54, 41873.99],
        ['2020-01-10 00:00:00', 9.49, 9.38, 9.36, 9.49, 47779.5],
        ['2020-01-13 00:00:00', 9.32, 9.31, 9.22, 9.4, 32650.58],
        ['2020-01-14 00:00:00', 9.3, 9.33, 9.3, 9.57, 43842.52],
        ['2020-01-15 00:00:00', 9.33, 9.31, 9.2, 9.41, 34933.0],
        ['2020-01-16 00:00:00', 9.32, 9.32, 9.24, 9.38, 30079.78],
        ['2020-01-17 00:00:00', 9.36, 9.44, 9.36, 9.64, 68331.97],
        ['2020-01-20 00:00:00', 9.43, 9.42, 9.15, 9.54, 40933.5],
        ['2020-01-21 00:00:00', 9.4, 9.29, 9.21, 9.43, 26806.0],
        ['2020-01-22 00:00:00', 9.25, 9.17, 9.14, 9.26, 23095.83],
        ['2020-01-23 00:00:00', 9.17, 9.11, 8.94, 9.25, 29738.57],
        ['2020-02-03 00:00:00', 8.2, 8.2, 8.2, 8.21, 15093.0],
        ['2020-02-04 00:00:00', 7.38, 7.38, 7.38, 7.38, 20108.0],
        ['2020-02-05 00:00:00', 6.67, 7.48, 6.64, 8.11, 394167.58],
        ['2020-02-06 00:00:00', 7.23, 7.35, 7.19, 7.47, 191089.2],
        ['2020-02-07 00:00:00', 7.3, 7.57, 7.26, 7.64, 190774.49],
        ['2020-02-10 00:00:00', 7.6, 8.33, 7.43, 8.33, 230977.87],
        ['2020-02-11 00:00:00', 8.12, 8.08, 7.96, 8.45, 179445.86],
        ['2020-02-12 00:00:00', 8.08, 8.13, 7.93, 8.15, 91897.66],
        ['2020-02-13 00:00:00', 8.03, 8.12, 8.01, 8.35, 93127.13],
        ['2020-02-14 00:00:00', 8.08, 8.06, 8.01, 8.21, 53821.5],
        ['2020-02-17 00:00:00', 8.02, 8.11, 8.01, 8.22, 80554.5],
        ['2020-02-18 00:00:00', 8.11, 8.23, 8.09, 8.25, 86665.42],
        ['2020-02-19 00:00:00', 8.3, 8.17, 8.15, 8.3, 93882.06],
        ['2020-02-20 00:00:00', 8.2, 8.18, 8.07, 8.24, 63587.51],
        ['2020-02-21 00:00:00', 8.17, 8.15, 8.1, 8.2, 68256.5],
        ['2020-02-24 00:00:00', 8.1, 8.67, 8.05, 8.8, 198381.07],
        ['2020-02-25 00:00:00', 8.53, 8.72, 8.33, 8.95, 166952.8],
        ['2020-02-26 00:00:00', 8.69, 8.59, 8.56, 8.95, 136909.26],
        ['2020-02-27 00:00:00', 8.72, 8.59, 8.48, 8.87, 88189.0],
        ['2020-02-28 00:00:00', 8.6, 8.63, 8.4, 8.79, 144210.44],
        ['2020-03-02 00:00:00', 8.63, 8.8, 8.58, 8.91, 180885.2],
        ['2020-03-03 00:00:00', 8.8, 9.11, 8.65, 9.47, 167141.09],
        ['2020-03-04 00:00:00', 9.0, 9.01, 8.89, 9.27, 103246.19],
        ['2020-03-05 00:00:00', 8.97, 9.06, 8.91, 9.1, 71245.26],
        ['2020-03-06 00:00:00', 8.96, 9.21, 8.9, 9.39, 127087.91],
        ['2020-03-09 00:00:00', 9.1, 9.43, 9.02, 9.67, 161050.24],
        ['2020-03-10 00:00:00', 8.6, 9.1, 8.6, 9.45, 136891.76],
        ['2020-03-11 00:00:00', 9.08, 8.89, 8.8, 9.09, 87727.9],
        ['2020-03-12 00:00:00', 8.88, 8.5, 8.42, 8.88, 69459.43],
        ['2020-03-13 00:00:00', 8.31, 8.4, 7.7, 8.55, 69231.53],
        ['2020-03-16 00:00:00', 8.48, 8.12, 8.08, 8.59, 58493.79],
        ['2020-03-17 00:00:00', 8.1, 8.12, 7.52, 8.23, 62940.69],
        ['2020-03-18 00:00:00', 8.12, 8.09, 8.04, 8.31, 57248.74],
        ['2020-03-19 00:00:00', 8.05, 8.28, 7.97, 8.3, 44221.09],
        ['2020-03-20 00:00:00', 8.23, 8.31, 8.17, 8.38, 26613.5],
        ['2020-03-23 00:00:00', 8.2, 8.23, 8.08, 8.43, 38097.0],
        ['2020-03-24 00:00:00', 8.25, 8.14, 8.01, 8.29, 42039.5],
        ['2020-03-25 00:00:00', 8.18, 8.31, 8.15, 8.31, 56664.28],
        ['2020-03-26 00:00:00', 8.3, 8.14, 8.08, 8.3, 37389.5],
        ['2020-03-27 00:00:00', 8.16, 8.14, 8.1, 8.3, 29596.92],
        ['2020-03-30 00:00:00', 8.13, 7.87, 7.33, 8.13, 128313.5],
        ['2020-03-31 00:00:00', 7.87, 8.09, 7.58, 8.22, 88969.96],
        ['2020-04-01 00:00:00', 8.16, 8.13, 8.02, 8.22, 27175.01],
        ['2020-04-02 00:00:00', 8.19, 8.17, 8.06, 8.19, 29911.0],
        ['2020-04-03 00:00:00', 8.15, 8.18, 8.06, 8.26, 41495.15],
        ['2020-04-07 00:00:00', 8.19, 8.19, 8.19, 8.28, 51964.85],
        ['2020-04-08 00:00:00', 8.18, 8.2, 8.1, 8.25, 34036.25],
        ['2020-04-09 00:00:00', 8.17, 8.11, 8.11, 8.21, 41971.67],
        ['2020-04-10 00:00:00', 8.11, 8.06, 8.05, 8.15, 54795.04],
        ['2020-04-13 00:00:00', 8.06, 8.08, 8.01, 8.13, 31726.5],
        ['2020-04-14 00:00:00', 8.13, 8.09, 8.06, 8.13, 46390.28],
        ['2020-04-15 00:00:00', 8.12, 8.1, 8.06, 8.13, 43728.6],
        ['2020-04-16 00:00:00', 8.12, 8.09, 8.0, 8.13, 26605.65],
        ['2020-04-17 00:00:00', 8.12, 8.05, 8.01, 8.14, 26436.85],
        ['2020-04-20 00:00:00', 8.06, 8.05, 7.96, 8.09, 28318.8],
        ['2020-04-21 00:00:00', 8.05, 8.02, 7.8, 8.05, 76640.16],
        ['2020-04-22 00:00:00', 8.04, 8.02, 7.96, 8.06, 48172.58],
        ['2020-04-23 00:00:00', 8.06, 8.1, 7.96, 8.28, 56200.27],
        ['2020-04-24 00:00:00', 8.08, 8.08, 8.01, 8.15, 54769.58],
        ['2020-04-27 00:00:00', 8.11, 8.02, 7.89, 8.11, 50398.43],
        ['2020-04-28 00:00:00', 8.0, 7.99, 7.76, 8.04, 41250.74],
        ['2020-04-29 00:00:00', 7.99, 7.97, 7.91, 8.01, 26866.53],
        ['2020-04-30 00:00:00', 7.97, 7.96, 7.89, 8.06, 28482.0],
        ['2020-05-06 00:00:00', 7.93, 7.87, 7.82, 7.98, 37597.81],
        ['2020-05-07 00:00:00', 7.87, 7.86, 7.82, 7.9, 22775.16],
        ['2020-05-08 00:00:00', 7.89, 7.89, 7.83, 7.97, 24763.0],
        ['2020-05-11 00:00:00', 7.9, 7.9, 7.85, 7.95, 14681.0],
        ['2020-05-12 00:00:00', 7.9, 8.33, 7.86, 8.36, 69569.35],
        ['2020-05-13 00:00:00', 8.21, 8.16, 8.13, 8.46, 68840.0],
        ['2020-05-14 00:00:00', 8.2, 7.99, 7.99, 8.25, 53981.0],
        ['2020-05-15 00:00:00', 8.08, 7.99, 7.75, 8.09, 63349.68],
        ['2020-05-18 00:00:00', 8.02, 7.91, 7.9, 8.07, 37054.0],
        ['2020-05-19 00:00:00', 7.94, 7.87, 7.79, 7.94, 97334.52],
        ['2020-05-20 00:00:00', 7.88, 7.84, 7.7, 7.89, 30987.34],
        ['2020-05-21 00:00:00', 7.9, 7.85, 7.78, 7.9, 20163.01],
        ['2020-05-22 00:00:00', 7.85, 8.05, 7.8, 8.32, 73011.17],
        ['2020-05-25 00:00:00', 8.03, 8.0, 7.95, 8.11, 26249.41],
        ['2020-05-26 00:00:00', 8.0, 8.01, 7.94, 8.01, 14205.55],
        ['2020-05-27 00:00:00', 8.01, 7.98, 7.95, 8.02, 10059.0],
        ['2020-05-28 00:00:00', 8.0, 7.96, 7.93, 8.04, 21141.05],
        ['2020-05-29 00:00:00', 7.96, 8.19, 7.9, 8.25, 87917.35],
        ['2020-06-01 00:00:00', 8.21, 8.73, 8.21, 8.84, 110270.37],
        ['2020-06-02 00:00:00', 8.84, 8.6, 8.52, 8.97, 113620.33],
        ['2020-06-03 00:00:00', 8.66, 8.1, 8.07, 8.66, 130151.39],
        ['2020-06-04 00:00:00', 8.1, 8.12, 7.89, 8.23, 77232.17],
        ['2020-06-05 00:00:00', 8.14, 8.28, 7.97, 8.52, 127921.88],
        ['2020-06-08 00:00:00', 8.27, 8.08, 8.01, 8.28, 65869.62],
        ['2020-06-09 00:00:00', 8.11, 8.06, 8.01, 8.11, 25719.01],
        ['2020-06-10 00:00:00', 8.06, 8.05, 8.01, 8.07, 19855.0],
        ['2020-06-11 00:00:00', 8.04, 8.03, 7.99, 8.06, 18977.0],
        ['2020-06-12 00:00:00', 7.95, 8.07, 7.91, 8.26, 40089.88],
        ['2020-06-15 00:00:00', 8.05, 8.45, 8.0, 8.56, 87248.52],
        ['2020-06-16 00:00:00', 8.43, 8.43, 8.33, 8.47, 83289.5],
        ['2020-06-17 00:00:00', 8.42, 8.92, 8.35, 8.98, 134706.12],
        ['2020-06-18 00:00:00', 8.87, 8.96, 8.86, 9.11, 74090.38],
        ['2020-06-19 00:00:00', 8.92, 9.25, 8.92, 9.32, 90124.88],
        ['2020-06-22 00:00:00', 9.3, 9.3, 9.16, 9.35, 84187.12],
        ['2020-06-23 00:00:00', 9.3, 9.3, 9.23, 9.41, 86441.0],
        ['2020-06-24 00:00:00', 9.3, 9.09, 9.09, 9.36, 53946.5],
        ['2020-06-29 00:00:00', 9.09, 8.81, 8.74, 9.18, 58796.5],
        ['2020-06-30 00:00:00', 8.81, 8.73, 8.71, 8.99, 47195.51],
        ['2020-07-01 00:00:00', 8.73, 8.78, 8.7, 8.96, 52834.13],
        ['2020-07-02 00:00:00', 8.78, 8.7, 8.66, 8.82, 36010.0],
        ['2020-07-03 00:00:00', 8.7, 8.73, 8.65, 8.8, 48645.62],
        ['2020-07-06 00:00:00', 8.74, 8.83, 8.74, 8.9, 57438.74],
        ['2020-07-07 00:00:00', 8.85, 8.77, 8.63, 8.85, 77804.15],
        ['2020-07-08 00:00:00', 8.76, 8.85, 8.7, 8.86, 46855.72],
        ['2020-07-09 00:00:00', 8.85, 9.41, 8.75, 9.5, 136070.88],
        ['2020-07-10 00:00:00', 9.39, 9.7, 9.21, 10.09, 147972.82],
        ['2020-07-13 00:00:00', 9.7, 9.66, 9.51, 9.79, 99143.91],
        ['2020-07-14 00:00:00', 9.57, 9.26, 9.1, 9.68, 77561.33],
        ['2020-07-15 00:00:00', 9.26, 9.25, 9.19, 9.45, 101660.16],
        ['2020-07-16 00:00:00', 9.16, 8.8, 8.78, 9.2, 68051.41],
        ['2020-07-17 00:00:00', 8.77, 8.53, 8.45, 8.84, 36086.0],
        ['2020-07-20 00:00:00', 8.53, 8.65, 8.53, 8.68, 25657.99],
        ['2020-07-21 00:00:00', 8.69, 8.66, 8.64, 8.82, 21475.59],
        ['2020-07-22 00:00:00', 8.68, 8.69, 8.58, 8.77, 35562.01],
        ['2020-07-23 00:00:00', 8.67, 8.55, 8.45, 8.67, 26195.44],
        ['2020-07-24 00:00:00', 8.54, 8.55, 8.41, 8.69, 28906.89],
        ['2020-07-27 00:00:00', 8.55, 8.53, 8.41, 8.58, 35697.99],
        ['2020-07-28 00:00:00', 8.52, 8.52, 8.48, 8.57, 31381.71],
        ['2020-07-29 00:00:00', 8.52, 8.54, 8.46, 8.57, 25476.48],
        ['2020-07-30 00:00:00', 8.6, 8.56, 8.55, 8.88, 82798.48],
        ['2020-07-31 00:00:00', 8.56, 8.6, 8.45, 8.68, 58010.68],
        ['2020-08-03 00:00:00', 8.61, 8.82, 8.61, 9.12, 110786.19],
        ['2020-08-04 00:00:00', 8.78, 8.79, 8.67, 8.97, 102132.0],
        ['2020-08-05 00:00:00', 8.79, 8.67, 8.63, 8.79, 40017.05],
        ['2020-08-06 00:00:00', 8.67, 8.62, 8.51, 8.67, 54777.0],
        ['2020-08-07 00:00:00', 8.57, 8.63, 8.52, 8.65, 44018.65],
        ['2020-08-10 00:00:00', 8.57, 8.83, 8.55, 8.87, 51679.5],
        ['2020-08-11 00:00:00', 8.85, 8.96, 8.8, 9.1, 62058.22],
        ['2020-08-12 00:00:00', 8.96, 8.71, 8.56, 8.96, 71888.55],
        ['2020-08-13 00:00:00', 8.72, 9.0, 8.64, 9.13, 73799.45],
        ['2020-08-14 00:00:00', 9.01, 9.18, 8.88, 9.2, 84186.5],
        ['2020-08-17 00:00:00', 9.17, 9.17, 9.1, 9.22, 56410.27],
        ['2020-08-18 00:00:00', 9.17, 9.03, 8.98, 9.17, 41433.6],
        ['2020-08-19 00:00:00', 9.03, 9.07, 8.9, 9.22, 53366.0],
        ['2020-08-20 00:00:00', 9.07, 9.2, 8.96, 9.43, 71163.79],
        ['2020-08-21 00:00:00', 9.16, 9.05, 8.98, 9.19, 38243.5],
        ['2020-08-24 00:00:00', 9.06, 8.96, 8.85, 9.06, 22569.95],
        ['2020-08-25 00:00:00', 8.9, 8.93, 8.84, 9.02, 30785.57],
        ['2020-08-26 00:00:00', 8.92, 9.16, 8.86, 9.28, 91698.29],
        ['2020-08-27 00:00:00', 9.15, 9.1, 8.9, 9.23, 91632.37],
        ['2020-08-28 00:00:00', 9.08, 9.1, 9.0, 9.3, 51228.11],
        ['2020-08-31 00:00:00', 9.05, 9.08, 8.98, 9.19, 39090.01],
        ['2020-09-01 00:00:00', 9.0, 9.02, 8.99, 9.1, 29554.51],
        ['2020-09-02 00:00:00', 9.03, 9.2, 8.99, 9.22, 75341.01],
        ['2020-09-03 00:00:00', 9.24, 9.05, 9.04, 9.24, 28705.1],
        ['2020-09-04 00:00:00', 9.03, 9.25, 8.85, 9.25, 71686.72],
        ['2020-09-07 00:00:00', 9.25, 9.14, 9.11, 9.68, 66815.99],
        ['2020-09-08 00:00:00', 9.36, 9.27, 9.15, 9.41, 79336.78],
        ['2020-09-09 00:00:00', 9.23, 9.12, 9.05, 9.32, 88993.83],
        ['2020-09-10 00:00:00', 9.13, 9.12, 8.9, 9.25, 62116.49],
        ['2020-09-11 00:00:00', 9.12, 9.12, 9.0, 9.19, 46657.5],
        ['2020-09-14 00:00:00', 9.11, 9.12, 9.04, 9.17, 36154.0],
        ['2020-09-15 00:00:00', 9.11, 9.3, 9.08, 9.54, 98175.38],
        ['2020-09-16 00:00:00', 9.3, 9.3, 9.2, 9.41, 52669.15],
        ['2020-09-17 00:00:00', 9.2, 9.17, 9.13, 9.38, 64020.02],
        ['2020-09-18 00:00:00', 9.18, 9.23, 9.03, 9.26, 60576.14],
        ['2020-09-21 00:00:00', 9.2, 9.29, 9.15, 9.4, 39461.0],
        ['2020-09-22 00:00:00', 9.22, 9.15, 8.98, 9.29, 45907.91],
        ['2020-09-23 00:00:00', 9.12, 9.06, 9.02, 9.15, 38857.03],
        ['2020-09-24 00:00:00', 9.0, 9.23, 9.0, 9.32, 64353.01],
        ['2020-09-25 00:00:00', 9.22, 9.12, 9.11, 9.34, 26828.5],
        ['2020-09-28 00:00:00', 9.08, 9.0, 8.97, 9.2, 28911.5],
        ['2020-09-29 00:00:00', 9.01, 8.99, 8.8, 9.08, 43283.4],
        ['2020-09-30 00:00:00', 9.0, 9.4, 8.97, 9.44, 99211.0],
        ['2020-10-09 00:00:00', 9.39, 9.51, 9.35, 9.57, 59688.5],
        ['2020-10-12 00:00:00', 9.49, 9.43, 9.31, 9.6, 62232.66],
        ['2020-10-13 00:00:00', 9.44, 9.53, 9.33, 9.53, 46651.27],
        ['2020-10-14 00:00:00', 9.46, 9.38, 9.37, 9.68, 57890.5],
        ['2020-10-15 00:00:00', 9.3, 9.52, 9.23, 9.65, 87528.09],
        ['2020-10-16 00:00:00', 9.51, 9.15, 9.08, 9.6, 86936.9],
        ['2020-10-19 00:00:00', 9.12, 9.2, 9.12, 9.55, 75605.0],
        ['2020-10-20 00:00:00', 9.2, 9.13, 9.07, 9.29, 46703.02],
        ['2020-10-21 00:00:00', 9.18, 9.08, 9.0, 9.2, 28585.0],
        ['2020-10-22 00:00:00', 9.05, 9.26, 9.05, 9.33, 47915.0],
        ['2020-10-23 00:00:00', 9.2, 9.06, 9.03, 9.41, 53037.83],
        ['2020-10-26 00:00:00', 9.08, 9.12, 9.0, 9.16, 56368.5],
        ['2020-10-27 00:00:00', 9.13, 9.4, 9.04, 9.59, 193943.53],
        ['2020-10-28 00:00:00', 9.55, 8.86, 8.83, 9.58, 112036.01],
        ['2020-10-29 00:00:00', 8.85, 8.87, 8.84, 9.01, 48453.83],
        ['2020-10-30 00:00:00', 8.85, 8.86, 8.81, 8.92, 37779.01],
        ['2020-11-02 00:00:00', 8.83, 9.37, 8.63, 9.45, 89668.51],
        ['2020-11-03 00:00:00', 9.33, 9.65, 9.06, 9.9, 118069.17],
        ['2020-11-04 00:00:00', 9.65, 9.59, 9.3, 9.7, 70735.7],
        ['2020-11-05 00:00:00', 9.48, 9.48, 9.38, 9.52, 34536.2],
        ['2020-11-06 00:00:00', 9.48, 9.5, 9.34, 9.53, 31642.95],
        ['2020-11-09 00:00:00', 9.5, 9.42, 9.4, 9.54, 47018.33],
        ['2020-11-10 00:00:00', 9.42, 9.47, 9.34, 9.55, 74517.51],
        ['2020-11-11 00:00:00', 9.5, 9.48, 9.42, 9.62, 27412.0],
        ['2020-11-12 00:00:00', 9.48, 9.35, 9.31, 9.49, 23706.5],
        ['2020-11-13 00:00:00', 9.35, 9.38, 9.24, 9.42, 17391.34],
        ['2020-11-16 00:00:00', 9.42, 9.2, 9.18, 9.42, 22567.5],
        ['2020-11-17 00:00:00', 9.22, 9.25, 9.05, 9.31, 54465.51],
        ['2020-11-18 00:00:00', 9.2, 9.22, 9.19, 9.39, 49881.15],
        ['2020-11-19 00:00:00', 9.27, 9.22, 9.18, 9.32, 18052.0],
        ['2020-11-20 00:00:00', 9.2, 9.2, 9.13, 9.25, 16692.12],
        ['2020-11-23 00:00:00', 9.21, 9.13, 9.13, 9.23, 16939.97],
        ['2020-11-24 00:00:00', 9.13, 9.22, 9.12, 9.3, 22904.21],
        ['2020-11-25 00:00:00', 9.23, 9.37, 9.23, 9.48, 54334.7],
        ['2020-11-26 00:00:00', 9.5, 9.49, 9.25, 9.65, 79334.83],
        ['2020-11-27 00:00:00', 9.4, 9.49, 9.31, 9.5, 85614.01],
        ['2020-11-30 00:00:00', 9.48, 9.49, 9.35, 9.59, 53874.5],
        ['2020-12-01 00:00:00', 9.42, 9.44, 9.28, 9.49, 57552.0],
        ['2020-12-02 00:00:00', 9.4, 8.98, 8.98, 9.4, 77011.5],
        ['2020-12-03 00:00:00', 8.86, 8.08, 8.08, 8.86, 175579.0],
        ['2020-12-04 00:00:00', 8.0, 8.14, 7.86, 8.28, 78795.36],
        ['2020-12-07 00:00:00', 8.14, 8.14, 8.06, 8.25, 39807.76],
        ['2020-12-08 00:00:00', 8.21, 8.22, 8.08, 8.4, 41980.88],
        ['2020-12-09 00:00:00', 8.21, 8.12, 7.95, 8.25, 67530.5],
        ['2020-12-10 00:00:00', 8.1, 8.08, 8.01, 8.15, 71881.4],
        ['2020-12-11 00:00:00', 8.1, 7.99, 7.87, 8.1, 38594.0],
        ['2020-12-14 00:00:00', 8.0, 8.0, 7.88, 8.05, 69976.5],
        ['2020-12-15 00:00:00', 8.07, 8.2, 7.96, 8.24, 55780.64],
        ['2020-12-16 00:00:00', 8.24, 8.4, 8.18, 8.46, 52396.11],
        ['2020-12-17 00:00:00', 8.38, 8.55, 8.35, 8.86, 57935.6],
        ['2020-12-18 00:00:00', 8.55, 8.65, 8.48, 8.65, 40704.15],
        ['2020-12-21 00:00:00', 8.65, 8.58, 8.55, 8.7, 31308.5],
        ['2020-12-22 00:00:00', 8.51, 8.61, 8.48, 8.65, 82775.97],
        ['2020-12-23 00:00:00', 8.61, 8.58, 8.54, 8.68, 31715.63],
        ['2020-12-24 00:00:00', 8.6, 8.58, 8.52, 8.67, 68470.5],
        ['2020-12-25 00:00:00', 8.62, 8.52, 8.51, 8.65, 21097.0],
        ['2020-12-28 00:00:00', 8.54, 8.5, 8.38, 8.6, 62383.03],
        ['2020-12-29 00:00:00', 8.54, 8.6, 8.53, 8.75, 54221.0],
        ['2020-12-30 00:00:00', 8.68, 7.74, 7.74, 8.68, 123445.44],
        ['2020-12-31 00:00:00', 6.97, 6.97, 6.97, 6.97, 12297.0],
        ['2021-01-04 00:00:00', 6.27, 6.27, 6.27, 6.27, 8509.0],
        ['2021-01-05 00:00:00', 5.64, 5.64, 5.64, 5.75, 714357.66],
        ['2021-01-06 00:00:00', 5.3, 5.08, 5.08, 5.34, 236937.05],
        ['2021-01-07 00:00:00', 4.57, 4.57, 4.57, 4.57, 65095.0],
        ['2021-01-08 00:00:00', 4.11, 4.11, 4.11, 4.11, 36074.0],
        ['2021-01-11 00:00:00', 3.7, 3.7, 3.7, 4.11, 694823.75],
        ['2021-01-12 00:00:00', 3.49, 3.33, 3.33, 3.54, 418316.38],
        ['2021-01-13 00:00:00', 3.37, 3.25, 3.21, 3.45, 422851.22],
        ['2021-01-14 00:00:00', 3.17, 3.11, 3.01, 3.24, 393731.55],
        ['2021-01-15 00:00:00', 3.12, 3.24, 3.08, 3.38, 372272.11],
        ['2021-01-18 00:00:00', 3.28, 3.31, 3.21, 3.43, 305287.0],
        ['2021-01-19 00:00:00', 3.35, 3.41, 3.23, 3.43, 288564.18],
        ['2021-01-20 00:00:00', 3.38, 3.31, 3.3, 3.43, 202277.0],
        ['2021-01-21 00:00:00', 3.31, 3.34, 3.28, 3.4, 171319.5],
        ['2021-01-22 00:00:00', 3.31, 3.19, 3.17, 3.34, 179773.48],
        ['2021-01-25 00:00:00', 3.15, 3.01, 3.0, 3.17, 219203.6],
        ['2021-01-26 00:00:00', 2.95, 3.1, 2.91, 3.1, 192547.96],
        ['2021-01-27 00:00:00', 3.06, 3.0, 2.98, 3.06, 160792.25],
        ['2021-01-28 00:00:00', 2.94, 2.88, 2.87, 3.04, 248591.51],
        ['2021-01-29 00:00:00', 2.87, 2.64, 2.59, 2.88, 515005.3],
        ['2021-02-01 00:00:00', 2.59, 2.72, 2.56, 2.84, 432805.5],
        ['2021-02-02 00:00:00', 2.71, 2.57, 2.57, 2.75, 247443.44],
        ['2021-02-03 00:00:00', 2.55, 2.76, 2.55, 2.83, 485667.68],
        ['2021-02-04 00:00:00', 2.67, 2.59, 2.55, 2.68, 261098.2]
      ]
      this.chart.setOption({
        animation: false,
        backgroundColor: '#111111',
        legend: { // 图例
          data: ['日线', 'MA5', 'MA10', 'MA20', 'MA30', '旧笔', '新笔', '线段', '中枢', '买点', '卖点'],
          inactiveColor: '#5f5f5f',
          textStyle: {
            color: '#ffffff'
          }
        },
        toolbox: { // 工具栏
          show: true,
          feature: {
            dataZoom: { // 缩放
              yAxisIndex: 'none'
            },
            restore: {} // 还原
          }
        },
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            animation: false,
            type: 'cross',
            lineStyle: {
              color: '#adadad',
              width: 1,
              opacity: 0.5,
              type: 'dashed'
            }
          },
          position: function(pos, params, el, elRect, size) { // 设置提示框位置
            var obj = {
              top: 10
            }
            obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30
            return obj
          }
        },
        axisPointer: {
          link: {
            xAxisIndex: 'all'
          }
        },
        xAxis: [{ // K线图
          show: true,
          type: 'category',
          data: [],
          scale: true,
          gridIndex: 0,
          axisLabel: {
            show: false
          },
          axisPointer: {
            label: {
              show: false
            }
          },
          axisLine: {
            lineStyle: {
              color: '#AABCD4'
            }
          }
        }, { // MACD
          type: 'category',
          show: true,
          data: [],
          scale: true,
          gridIndex: 1,
          axisLabel: {
            show: false
          },
          axisPointer: {
            label: {
              show: false
            }
          },
          axisLine: {
            lineStyle: {
              color: '#AABCD4'
            }
          }
        },
        { // 成交量
          type: 'category',
          show: true,
          data: [],
          scale: true,
          gridIndex: 2,
          axisLine: {
            lineStyle: {
              color: '#AABCD4'
            }
          }
        }
        ],
        yAxis: [{ // K线图
          scale: true,
          gridIndex: 0,
          axisLine: {
            lineStyle: {
              color: '#AABCD4'
            }
          },
          splitNumber: 6,
          splitLine: {
            show: true,
            lineStyle: {
              color: '#660000',
              type: 'dotted'
            }
          }
        },
        { // MACD
          scale: true,
          gridIndex: 1,
          axisLine: {
            lineStyle: {
              color: '#AABCD4'
            }
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: '#660000',
              type: 'dotted'
            }
          }
        }, { // 成交量
          scale: true,
          gridIndex: 2,
          axisLine: {
            lineStyle: {
              color: '#AABCD4'
            }
          },
          splitNumber: 2,
          splitLine: {
            show: true,
            lineStyle: {
              color: '#660000',
              type: 'dotted'
            }
          }
        }
        ],
        visualMap: [{
          show: false,
          seriesIndex: 8, // series,第5个为MACD，第8个为成交量
          pieces: [{
            value: 1,
            color: color_green
          }, {
            value: -1,
            color: color_red
          }]
        }],
        grid: [{
          top: '3%',
          height: '58%'
        },
        {
          top: '63%',
          height: '20%'
        },
        {
          top: '85%',
          height: '10%'
        }
        ],
        dataZoom: [{
          type: 'inside',
          // start:80,
          xAxisIndex: [0, 1, 2] // 控件联动
        }, {
          type: 'slider',
          // start:80,
          xAxisIndex: [0, 1, 2],
          show: true,
          textStyle: {
            color: '#8392A5'
          },
          handleSize: '80%',
          dataBackground: {
            areaStyle: {
              color: '#8392A5'
            },
            lineStyle: {
              opacity: 0.8,
              color: '#8392A5'
            }
          },
          handleStyle: {
            color: '#fff',
            shadowBlur: 3,
            shadowColor: 'rgba(0, 0, 0, 0.6)',
            shadowOffsetX: 2,
            shadowOffsetY: 2
          }
        }],
        series: [{
          name: '日线',
          type: 'candlestick',
          xAxisIndex: 0,
          yAxisIndex: 0,
          data: [],
          itemStyle: {
            normal: {
              color: 'transparent',
              color0: color_green,
              borderColor: color_red,
              borderColor0: color_green
            }
          },
          markPoint: { // 标记最大最小值
            symbol: 'circle',
            symbolSize: function(value, param) {
              let size = 15
              if (param.name === '最高价' || param.name === '最低价') {
                size = 0.1
              }
              return size
            },
            label: {
              show: true,
              fontSize: 12,
              color: '#fff',
              formatter: function(param) {
                let val = ''
                if (param.name === '标点') {
                  val = param.value
                } else if (param.name === '最低价') {
                  val = param.value + ' →'
                } else if (param.name === '最高价') {
                  val = '← ' + param.value
                }
                return val
              }
            },
            data: [{
              name: '最高价',
              type: 'max',
              valueDim: 'highest',
              symbolOffset: [20, 0]
            },
            {
              name: '最低价',
              type: 'min',
              valueDim: 'lowest',
              symbolOffset: [-20, 0]
            }
            ]
          }
        },
        {
          name: 'MA5',
          type: 'line',
          data: [],
          smooth: true,
          showSymbol: false,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#a3a3a3',
              width: 1,
              opacity: 0.7
            }
          }
        },
        {
          name: 'MA10',
          type: 'line',
          data: [],
          smooth: true,
          showSymbol: false,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#990099',
              width: 1,
              opacity: 0.7
            }
          }
        },
        {
          name: 'MA20',
          type: 'line',
          data: [],
          smooth: true,
          showSymbol: false,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#1e8700',
              width: 1,
              opacity: 0.7
            }
          }
        },
        {
          name: 'MA30',
          type: 'line',
          data: [],
          smooth: true,
          showSymbol: false,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#009595',
              width: 1,
              opacity: 0.7
            }
          }
        },
        {
          name: 'MACD',
          type: 'bar',
          barWidth: '10%',
          xAxisIndex: 1,
          yAxisIndex: 1,
          data: []
        },
        {
          name: 'DIF',
          type: 'line',
          showSymbol: false,
          smooth: true,
          data: [],
          lineStyle: {
            normal: {
              color: '#ffffff',
              width: 1
            }
          }
        },
        {
          name: 'DEA',
          type: 'line',
          showSymbol: false,
          smooth: true,
          data: [],
          lineStyle: {
            normal: {
              color: '#ffee00',
              width: 1
            }
          }
        },
        {
          name: '成交量',
          type: 'bar',
          barWidth: '70%',
          xAxisIndex: 2,
          yAxisIndex: 2,
          data: []
        },
        {
          name: '旧笔',
          type: 'line',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          smooth: false,
          showSymbol: true,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#ff6e1f',
              width: 1
            }
          }
        },
        {
          name: '新笔',
          type: 'line',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          smooth: false,
          showSymbol: true,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#ff7ae1',
              width: 1
            }
          }
        },
        {
          name: '线段',
          type: 'line',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          smooth: false,
          showSymbol: true,
          // 设置阴影部分
          // areaStyle: {},

          lineStyle: {
            normal: {
              color: '#ffee00',
              width: 1,
              type: 'dashed'
            }
          }
        },
        {
          name: '中枢',
          type: 'line',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          markArea: {
            silent: true,
            itemStyle: {
              normal: {
                color: 'rgb(58,164,255, 0.2)'
              }
            },
            data: []
          }
        },
        {
          name: '买点',
          type: 'line',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          markPoint: {
            data: [],
            symbolRotate: 180,
            silent: true,
            itemStyle: {
              color: '#00eeff'
            }
          }
        },
        {
          name: '卖点',
          type: 'line',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          markPoint: {
            data: [],
            silent: true,
            itemStyle: {
              color: '#ff7700'
            }
          }
        }
        ]
      })
      var data = this.getData(rawData)
      var macd = this.calculateMACD(12, 26, 9, data.values, 1)
      this.chart.setOption({
        xAxis: [{
          data: data.date
        },
        {
          data: data.date
        },
        {
          data: data.date
        }
        ],
        series: [{
          name: '日线',
          xAxisIndex: 0,
          yAxisIndex: 0,
          data: data.values
        }, {
          name: 'MA5',
          data: this.calculateMA(5, data)
        }, {
          name: 'MA10',
          data: this.calculateMA(10, data)
        }, {
          name: 'MA20',
          data: this.calculateMA(20, data)
        }, {
          name: 'MA30',
          data: this.calculateMA(30, data)
        }, {
          name: 'MACD',
          xAxisIndex: 1,
          yAxisIndex: 1,
          data: macd.macd
        }, {
          name: 'DIF',
          xAxisIndex: 1,
          yAxisIndex: 1,
          data: macd.dif
        }, {
          name: 'DEA',
          xAxisIndex: 1,
          yAxisIndex: 1,
          data: macd.dea
        }, {
          name: '成交量',
          xAxisIndex: 2,
          yAxisIndex: 2,
          data: data.volumes
        }, {
          name: '旧笔',
          xAxisIndex: 0,
          yAxisIndex: 0,
          data: [
            ['2019-08-06 00:00:00', 6.807],
            ['2019-08-15 00:00:00', 7.109],
            ['2019-08-28 00:00:00', 9.915],
            ['2019-09-02 00:00:00', 7.898],
            ['2019-09-09 00:00:00', 8.396],
            ['2019-09-19 00:00:00', 7.957],
            ['2019-10-15 00:00:00', 10.033],
            ['2019-11-11 00:00:00', 8.945],
            ['2019-11-18 00:00:00', 11.097],
            ['2019-12-06 00:00:00', 9.624],
            ['2019-12-10 00:00:00', 10.627],
            ['2020-01-23 00:00:00', 9.14],
            ['2020-02-05 00:00:00', 6.64],
            ['2020-03-09 00:00:00', 9.31],
            ['2020-03-30 00:00:00', 7.81],
            ['2020-05-11 00:00:00', 7.908],
            ['2020-06-02 00:00:00', 8.715],
            ['2020-06-12 00:00:00', 8.034]
          ]
        }, {
          name: '中枢',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          markArea: {
            data: [
              [{
                coord: ['2019-09-02 00:00:00', 11.097]
              }, {
                coord: ['2019-11-18 00:00:00', 7.898]
              }],
              [{
                coord: ['2019-12-10 00:00:00', 9.31]
              }, {
                coord: ['2020-03-09 00:00:00', 10.627]
              }]
            ]
          }
        }, {
          name: '买点',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          markPoint: {
            data: [{
              coord: ['2019-09-02 00:00:00', 7.898]
            }, {
              coord: ['2019-12-10 00:00:00', 9.31]
            }]
          }
        }, {
          name: '卖点',
          data: [],
          xAxisIndex: 0,
          yAxisIndex: 0,
          markPoint: {
            data: [{
              coord: ['2019-11-18 00:00:00', 11.097]
            }, {
              coord: ['2020-03-09 00:00:00', 10.627]
            }]
          }
        }]
      })
    },
    getData(rawData) {
      var date = []
      var values = []
      var volumes = []
      var data = {}
      for (var i = 0; i < rawData.length; i++) {
        date.push(rawData[i].splice(0, 1)[0])
        values.push(rawData[i])
        volumes.push([i, rawData[i][4], rawData[i][0] > rawData[i][1] ? 1 : -1])
      }
      data.date = date
      data.values = values
      data.volumes = volumes
      return data
    },
    calculateMA(dayCount, data) {
      var result = []
      for (var i = 0, len = data.values.length; i < len; i++) {
        if (i < dayCount) {
          result.push('-')
          continue
        }
        var sum = 0
        for (var j = 0; j < dayCount; j++) {
          sum += data.values[i - j][1]
        }
        result.push(+(sum / dayCount).toFixed(3))
      }

      return result
    },
    calculateMACD(short, long, mid, data, field) {
      var i, l, dif, dea, macd, result
      result = {}
      macd = []
      dif = this.calculateDIF(short, long, data, field)
      dea = this.calculateDEA(mid, dif)
      for (i = 0, l = data.length; i < l; i++) {
        var j = ((dif[i] - dea[i]) * 2).toFixed(3)
        macd.push([i, j, j < 0 ? 1 : -1])
      }
      result.dif = dif
      result.dea = dea
      result.macd = macd
      console.log(result)
      return result
    },
    calculateDIF(short, long, data, field) {
      var i, l, dif, emaShort, emaLong
      dif = []
      emaShort = this.calculateEMA(short, data, field)
      emaLong = this.calculateEMA(long, data, field)
      for (i = 0, l = data.length; i < l; i++) {
        dif.push((emaShort[i] - emaLong[i]).toFixed(3))
      }
      return dif
    },
    calculateDEA(mid, dif) {
      return this.calculateEMA(mid, dif)
    },
    calculateEMA(n, data, field) {
      var i, l, ema, a
      a = 2 / (n + 1)
      if (field) {
        // 二维数组
        ema = [data[0][field]]
        for (i = 1, l = data.length; i < l; i++) {
          ema.push((a * data[i][field] + (1 - a) * ema[i - 1]).toFixed(2))
        }
      } else {
        // 普通一维数组
        ema = [data[0]]
        for (i = 1, l = data.length; i < l; i++) {
          ema.push((a * data[i] + (1 - a) * ema[i - 1]).toFixed(3))
        }
      }
      return ema
    }

  }
}
</script>
